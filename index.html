<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Rufina Costura Creativa</title>
    <link rel="stylesheet" href="estilos.css"> 
</head>
<body>
    <header>
        <img src="./static/img/titulo.png" alt="Rufina Costuras Creativas">
    </header>

    <button class="boton-admin" onclick="accesoAdmin()">Agregar/Eliminar Art√≠culo</button>

    <div id="carrito">
        <h3>üõçÔ∏è Carrito</h3>
        <ul id="lista-carrito"></ul>
        <p>Total: $<span id="total">0</span></p>
        <button class="btn-vaciar" onclick="vaciarCarrito()">Vaciar</button>
        <button class="btn-finalizar" onclick="mostrarModalCompra()">Finalizar Compra</button>
    </div>

    <div class="articulos">
        <div class="articulo">
            <h3>Cartuchera</h3>
            <div class="carousel">
                <img src="./static/images/cartuchera.jpg" alt="Cartuchera Abierta" class="">
            </div>
            <p>Precio: $600.0</p>
            <p>Stock: 7</p>
            <a href="#" class="boton-comprar" onclick="agregarAlCarrito('Cartuchera',600)">Agregar al carrito</a>
        </div>

        <div class="articulo">
            <h3>Mochilas</h3>
            <div class="carousel">
                <img src="./static/images/mochilas.png" alt="Mochilas con dise√±os" class="">
            </div>
            <p>Precio: $2300.0</p>
            <p>Stock: 5</p>
            <a href="#" class="boton-comprar" onclick="agregarAlCarrito('Mochilas',2300)">Agregar al carrito</a>
        </div>

        <div class="articulo">
            <h3>Cartera</h3>
            <div class="carousel">
                <img src="./static/images/funda-para-mate.webp" alt="Funda o Cartera para Mate" class=""> 
            </div>
            <p>Precio: $1800.0</p>
            <p>Stock: 4</p>
            <a href="#" class="boton-comprar" onclick="agregarAlCarrito('Cartera',1800)">Agregar al carrito</a>
        </div>

        <div class="articulo">
            <h3>Monederos</h3>
            <div class="carousel">
                <img src="./static/images/monedero 1.jpg" alt="Monedero dise√±o 1" class="">
                <img src="./static/images/monedero 2.jpg" alt="Monedero dise√±o 2" class="inactive">
                <img src="./static/images/monedero 3.jpg" alt="Monedero dise√±o 3" class="inactive">
            </div>
            <p>Precio: $600.0</p>
            <p>Stock: 6</p>
            <a href="#" class="boton-comprar" onclick="agregarAlCarrito('Monederos',600)">Agregar al carrito</a>
        </div>

        <div class="articulo">
            <h3>Porta mate</h3>
            <div class="carousel">
                <img src="./static/images/portamate.jpg" alt="Porta Mate dise√±o 1" class="">
                <img src="./static/images/portamate2.jpg" alt="Porta Mate dise√±o 2" class="inactive">
            </div>
            <p>Precio: $1300.0</p>
            <p>Stock: 5</p>
            <a href="#" class="boton-comprar" onclick="agregarAlCarrito('Porta mate',1300)">Agregar al carrito</a>
        </div>

        <div class="articulo">
            <h3>Matera</h3>
            <div class="carousel">
                <img src="./static/images/matera.jpg" alt="Matera dise√±o" class="">
            </div>
            <p>Precio: $1300.0</p>
            <p>Stock: 6</p>
            <a href="#" class="boton-comprar" onclick="agregarAlCarrito('Matera',1300)">Agregar al carrito</a>
        </div>

    </div>

    <div class="info-envios">
        <h3>ENV√çOS</h3>
        <p>Si tu compra es de productos en stock, el env√≠o se realizar√° en un m√°ximo de 48 hs (d√≠as h√°biles), si el producto es personalizado la demora ser√° de 7 a 10 d√≠as h√°biles una vez realizado el pago.</p>
        <p>Los env√≠os se realizan por agencia DAC, el costo de env√≠o es a cargo del comprador.</p>
        <p>Tambi√©n podes pasar a retirar tu pedido en la zona de 8 de Octubre y Garibaldi de lunes a viernes de 8:30 a 15:30, d√≠a y hora a coordinar.</p>

        <h3>COMO PAGAR</h3>
        <p>Podes pagar tus compras en dep√≥sito o transferencia a Brou o tarjeta PREX.</p>
        <p>Mercado pago hasta en 12 cuotas con un adicional del 10% por comisi√≥n (pedir link de pago).</p>

        <h3>ELECCI√ìN DE PRODUCTOS EN TELAS QUE NO EST√âN EN STOCK</h3>
        <p>Solicita cat√°logo de telas al cel.: 094 363 375.</p>
    </div>

    <div class="footer">
        Rufina Costura Creativa<br>
        Laura Rodr√≠guez - cel. 094.363.375
    </div>

    <div class="modal" id="modal">
        <span class="cerrar">&times;</span>
        <span class="prev">&#10094;</span>
        <span class="next">&#10095;</span>
        <img id="modal-img">
        <div id="caption"></div>
    </div>
    
    <div class="modal" id="modal-compra" style="display:none;">
        <div class="modal-content">
            <span class="close-compra">&times;</span>
            <h2>Finalizar compra</h2>
            <form id="formulario-compra">
                <label for="nombre-compra">Tu nombre</label>
                <input type="text" id="nombre-compra" required><br>
                
                <label for="correo-compra">Tu correo</label>
                <input type="email" id="correo-compra" required><br>
                
                <label for="telefono-compra">Tu tel√©fono</label>
                <input type="tel" id="telefono-compra" required><br>
                
                <button type="submit" id="enviar-pedido">Enviar pedido</button>
                <button type="button" id="cancelar-pedido">Cancelar</button>
            </form>
        </div>
    </div>
    
    <script>
        // --- Variables y Funciones para el Modal de Compra ---
        const modalCompra = document.getElementById('modal-compra');
        const closeCompra = document.querySelector('.close-compra');
        const formularioCompra = document.getElementById('formulario-compra');
        const botonCancelar = document.getElementById('cancelar-pedido');
    
        function mostrarModalCompra() {
            if (carrito.length === 0) {
                alert("El carrito est√° vac√≠o. ¬°Agrega algunos productos antes de finalizar la compra!");
                return;
            }
            modalCompra.style.display = 'block';
        }
    
        function ocultarModalCompra() {
            modalCompra.style.display = 'none';
            formularioCompra.reset();
        }
        
        closeCompra.onclick = ocultarModalCompra;
        botonCancelar.onclick = ocultarModalCompra;
        window.onclick = function(event) {
            if (event.target == modalCompra) {
                ocultarModalCompra();
            }
        }
    
        // L√≥gica para enviar el pedido (Simulaci√≥n por WhatsApp)
        formularioCompra.addEventListener('submit', function(e) {
            e.preventDefault(); 
    
            const nombre = document.getElementById('nombre-compra').value;
            const telefono = document.getElementById('telefono-compra').value;
            const totalCompra = document.getElementById('total').textContent;
    
            let mensaje = `¬°Hola Rufina! Soy ${nombre} (Tel√©fono: ${telefono}) y me gustar√≠a hacer un pedido:\n\n`;
    
            // Detalle de los art√≠culos
            carrito.forEach(item => {
                mensaje += `- ${item.nombre}: $${item.precio}\n`;
            });
            
            mensaje += `\nTOTAL A PAGAR: $${totalCompra}`;
            mensaje += "\n\nPor favor, responde este mensaje para coordinar el pago y la entrega.";
    
            // Enlace a WhatsApp (Usando el n√∫mero de la informaci√≥n de tu footer: 094 363 375 -> +59894363375)
            const whatsappLink = `https://wa.me/59894363375?text=${encodeURIComponent(mensaje)}`; 
    
            // Redirigir y simular descuento de stock
            window.open(whatsappLink, '_blank'); 
            ocultarModalCompra();
            vaciarCarrito();
            alert("¬°Pedido enviado a WhatsApp! Por favor, revisa la nueva pesta√±a para confirmar.");
        });
    
    
        // --- FUNCIONES DE CARRITO Y ADMINISTRADOR ---
    
        // Funci√≥n de Acceso al Administrador (CON CONTRASE√ëA JS)
        function accesoAdmin() {
            // Ruta absoluta corregida. Usando el nombre del repositorio ('rufinaventas2025') y la carpeta 'templates'.
            const adminUrl = "/rufinaventas2025/templates/clave.html"; 
            const password = prompt("Ingrese la contrase√±a de administrador (1234):");
    
            if (password === "1234") { 
                window.location.href = adminUrl; 
            } else if (password !== null) {
                alert("Contrase√±a incorrecta. Acceso denegado."); 
            }
        }
    
        let carrito = [];
        function agregarAlCarrito(nombre, precio) {
            carrito.push({nombre, precio});
            actualizarCarrito();
        }
        function actualizarCarrito() {
            const lista = document.getElementById('lista-carrito');
            const total = document.getElementById('total');
            lista.innerHTML = '';
            let suma = 0;
            carrito.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item.nombre + ' $' + item.precio;
                lista.appendChild(li);
                suma += item.precio;
            });
            total.textContent = suma;
        }
        function vaciarCarrito() {
            carrito = [];
            actualizarCarrito();
        }
    
        // Carrusel y Modal de Im√°genes
        document.querySelectorAll('.carousel').forEach(carousel => {
            const imgs = carousel.querySelectorAll('img');
            let index = 0;
            if (imgs.length > 1) { 
                setInterval(() => {
                    imgs[index].classList.add('inactive');
                    index = (index + 1) % imgs.length;
                    imgs[index].classList.remove('inactive');
                }, 2000);
            }
        });
    
        const modal = document.getElementById('modal');
        const modalImg = document.getElementById('modal-img');
        const caption = document.getElementById('caption');
        let currentIndex = 0;
        let articuloImgs = [];
    
        document.querySelectorAll('.articulo').forEach(art => {
            art.querySelectorAll('img').forEach(img => {
                img.onclick = function() {
                    articuloImgs = Array.from(art.querySelectorAll('img'));
                    currentIndex = Array.from(articuloImgs).indexOf(this);
                    showModal();
                }
            });
        });
    
        function showModal() {
            modal.style.display = 'block';
            modalImg.src = articuloImgs[currentIndex].src;
            caption.textContent = articuloImgs[currentIndex].alt;
        }
    
        document.querySelector('.cerrar').onclick = () => modal.style.display = 'none';
        document.querySelector('.prev').onclick = () => {
            currentIndex = (currentIndex - 1 + articuloImgs.length) % articuloImgs.length;
            showModal();
        }
        document.querySelector('.next').onclick = () => {
            currentIndex = (currentIndex + 1) % articuloImgs.length;
            showModal();
        }
        modal.onclick = function(event) {
            if(event.target == modal) modal.style.display = 'none';
        }
    </script>
</body>
</html>
